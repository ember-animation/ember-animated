{"version":3,"file":"ea-list-element.js","sources":["../../src/components/ea-list-element.ts"],"sourcesContent":["import { warn } from '@ember/debug';\nimport Component from '@ember/component';\nimport { componentNodes } from '../-private/ember-internals.ts';\nimport type Child from '../-private/child.ts';\n\ninterface EaListElementSignature<T = unknown> {\n  Args: {\n    Named: {\n      child: T;\n      elementToChild: WeakMap<Element, Child>;\n    };\n  };\n  Blocks: {\n    default: [T, number];\n  };\n}\n\n/*\n   This component has one job: tracking which DOM elements correspond\n   with which list elements.\n*/\n\nexport default class EaListElement extends Component<EaListElementSignature> {\n  tagName = '';\n  isEmberAnimatedListElement = true;\n\n  child!: Child;\n  elementToChild!: Map<Element, Child>;\n\n  didRender() {\n    super.didRender();\n    let mapping = this.elementToChild;\n    let child = this.child;\n    this._forEachElement((elt) => {\n      mapping.set(elt, child);\n    });\n  }\n\n  _forEachElement(fn: (elt: Element) => void) {\n    let { firstNode, lastNode } = componentNodes(this as unknown as Component);\n    let node: Node | null = firstNode;\n    while (node) {\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        fn(node as Element);\n      } else if (!/^\\s*$/.test(node.textContent!)) {\n        warn('Found bare text content inside an animator', false, {\n          id: 'ember-animated-bare-text',\n        });\n      }\n      if (node === lastNode) {\n        break;\n      }\n      node = node.nextSibling;\n    }\n  }\n}\n"],"names":["EaListElement","Component","constructor","args","_defineProperty","didRender","mapping","elementToChild","child","_forEachElement","elt","set","fn","firstNode","lastNode","componentNodes","node","nodeType","Node","ELEMENT_NODE","test","textContent","warn","id","nextSibling"],"mappings":";;;;;AAiBA;AACA;AACA;AACA;;AAEe,MAAMA,aAAa,SAASC,SAAS,CAAyB;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,kBACjE,EAAE,CAAA,CAAA;AAAAA,IAAAA,eAAA,qCACiB,IAAI,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAAAA,eAAA,CAAA,IAAA,EAAA,gBAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAAA,GAAA;AAKjCC,EAAAA,SAASA,GAAG;IACV,KAAK,CAACA,SAAS,EAAE,CAAA;AACjB,IAAA,IAAIC,OAAO,GAAG,IAAI,CAACC,cAAc,CAAA;AACjC,IAAA,IAAIC,KAAK,GAAG,IAAI,CAACA,KAAK,CAAA;AACtB,IAAA,IAAI,CAACC,eAAe,CAAEC,GAAG,IAAK;AAC5BJ,MAAAA,OAAO,CAACK,GAAG,CAACD,GAAG,EAAEF,KAAK,CAAC,CAAA;AACzB,KAAC,CAAC,CAAA;AACJ,GAAA;EAEAC,eAAeA,CAACG,EAA0B,EAAE;IAC1C,IAAI;MAAEC,SAAS;AAAEC,MAAAA,QAAAA;AAAS,KAAC,GAAGC,cAAc,CAAC,IAA4B,CAAC,CAAA;IAC1E,IAAIC,IAAiB,GAAGH,SAAS,CAAA;AACjC,IAAA,OAAOG,IAAI,EAAE;AACX,MAAA,IAAIA,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACC,YAAY,EAAE;QACvCP,EAAE,CAACI,IAAe,CAAC,CAAA;OACpB,MAAM,IAAI,CAAC,OAAO,CAACI,IAAI,CAACJ,IAAI,CAACK,WAAY,CAAC,EAAE;AAC3CC,QAAAA,IAAI,CAAC,4CAA4C,EAAE,KAAK,EAAE;AACxDC,UAAAA,EAAE,EAAE,0BAAA;AACN,SAAC,CAAC,CAAA;AACJ,OAAA;MACA,IAAIP,IAAI,KAAKF,QAAQ,EAAE;AACrB,QAAA,MAAA;AACF,OAAA;MACAE,IAAI,GAAGA,IAAI,CAACQ,WAAW,CAAA;AACzB,KAAA;AACF,GAAA;AACF;;;;"}