{"version":3,"file":"ea-list-element.js","sources":["../../src/components/ea-list-element.ts"],"sourcesContent":["import { warn } from '@ember/debug';\nimport Component from '@ember/component';\nimport { componentNodes } from '../-private/ember-internals.ts';\nimport type Child from '../-private/child.ts';\n\ninterface EaListElementSignature<T = unknown> {\n  Args: {\n    Named: {\n      child: T;\n      elementToChild: WeakMap<Element, Child>;\n    };\n  };\n  Blocks: {\n    default: [T, number];\n  };\n}\n\n/*\n   This component has one job: tracking which DOM elements correspond\n   with which list elements.\n*/\n\nexport default class EaListElement extends Component<EaListElementSignature> {\n  tagName = '';\n  isEmberAnimatedListElement = true;\n\n  child!: Child;\n  elementToChild!: Map<Element, Child>;\n\n  didRender() {\n    super.didRender();\n    let mapping = this.elementToChild;\n    let child = this.child;\n    this._forEachElement((elt) => {\n      mapping.set(elt, child);\n    });\n  }\n\n  _forEachElement(fn: (elt: Element) => void) {\n    let { firstNode, lastNode } = componentNodes(this as unknown as Component);\n    let node: Node | null = firstNode;\n    while (node) {\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        fn(node as Element);\n      } else if (!/^\\s*$/.test(node.textContent!)) {\n        warn('Found bare text content inside an animator', false, {\n          id: 'ember-animated-bare-text',\n        });\n      }\n      if (node === lastNode) {\n        break;\n      }\n      node = node.nextSibling;\n    }\n  }\n}\n"],"names":["EaListElement","Component","tagName","isEmberAnimatedListElement","child","elementToChild","didRender","mapping","_forEachElement","elt","set","fn","firstNode","lastNode","componentNodes","node","nodeType","Node","ELEMENT_NODE","test","textContent","warn","id","nextSibling"],"mappings":";;;;AAiBA;AACA;AACA;AACA;;AAEe,MAAMA,aAAa,SAASC,SAAS,CAAyB;AAC3EC,EAAAA,OAAO,GAAG,EAAE;AACZC,EAAAA,0BAA0B,GAAG,IAAI;EAEjCC,KAAK;EACLC,cAAc;AAEdC,EAAAA,SAASA,GAAG;IACV,KAAK,CAACA,SAAS,EAAE;AACjB,IAAA,IAAIC,OAAO,GAAG,IAAI,CAACF,cAAc;AACjC,IAAA,IAAID,KAAK,GAAG,IAAI,CAACA,KAAK;AACtB,IAAA,IAAI,CAACI,eAAe,CAAEC,GAAG,IAAK;AAC5BF,MAAAA,OAAO,CAACG,GAAG,CAACD,GAAG,EAAEL,KAAK,CAAC;AACzB,KAAC,CAAC;AACJ;EAEAI,eAAeA,CAACG,EAA0B,EAAE;IAC1C,IAAI;MAAEC,SAAS;AAAEC,MAAAA;AAAS,KAAC,GAAGC,cAAc,CAAC,IAA4B,CAAC;IAC1E,IAAIC,IAAiB,GAAGH,SAAS;AACjC,IAAA,OAAOG,IAAI,EAAE;AACX,MAAA,IAAIA,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACC,YAAY,EAAE;QACvCP,EAAE,CAACI,IAAe,CAAC;OACpB,MAAM,IAAI,CAAC,OAAO,CAACI,IAAI,CAACJ,IAAI,CAACK,WAAY,CAAC,EAAE;AAC3CC,QAAAA,IAAI,CAAC,4CAA4C,EAAE,KAAK,EAAE;AACxDC,UAAAA,EAAE,EAAE;AACN,SAAC,CAAC;AACJ;MACA,IAAIP,IAAI,KAAKF,QAAQ,EAAE;AACrB,QAAA;AACF;MACAE,IAAI,GAAGA,IAAI,CAACQ,WAAW;AACzB;AACF;AACF;;;;"}