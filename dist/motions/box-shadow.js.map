{"version":3,"file":"box-shadow.js","sources":["../../src/motions/box-shadow.ts"],"sourcesContent":["import { BoxShadow, BoxShadowTween } from '../box-shadow.ts';\nimport Motion, { type BaseOptions } from '../-private/motion.ts';\nimport { rAF } from '../-private/concurrency-helpers.ts';\nimport type Sprite from '../-private/sprite.ts';\n\nexport default function boxShadow(\n  sprite: Sprite,\n  opts: Partial<BoxShadowMotionOptions> = {},\n) {\n  return new BoxShadowMotion(sprite, opts).run();\n}\n\ninterface BoxShadowMotionOptions extends BaseOptions {\n  from: string;\n  to: string;\n  easing: (time: number) => number;\n}\n\nexport class BoxShadowMotion extends Motion<BoxShadowMotionOptions> {\n  *animate() {\n    let from;\n    if (this.opts.from) {\n      from = BoxShadow.fromUserProvidedShadow(this.opts.from);\n    } else {\n      this.sprite.assertHasInitialBounds();\n      from = BoxShadow.fromComputedStyle(\n        this.sprite.initialComputedStyle['box-shadow'],\n      );\n    }\n\n    let to;\n    if (this.opts.to) {\n      to = BoxShadow.fromUserProvidedShadow(this.opts.to);\n    } else {\n      this.sprite.assertHasFinalBounds();\n      to = BoxShadow.fromComputedStyle(\n        this.sprite.finalComputedStyle['box-shadow'],\n      );\n    }\n\n    let shadowTween = new BoxShadowTween(\n      from,\n      to,\n      this.duration,\n      this.opts.easing,\n    );\n    while (!shadowTween.done) {\n      this.sprite.applyStyles({\n        'box-shadow': shadowTween.currentValue\n          .map((shadow) => shadow.toString())\n          .join(','),\n      });\n      yield rAF();\n    }\n  }\n}\n"],"names":["boxShadow","sprite","opts","BoxShadowMotion","run","Motion","animate","from","BoxShadow","fromUserProvidedShadow","assertHasInitialBounds","fromComputedStyle","initialComputedStyle","to","assertHasFinalBounds","finalComputedStyle","shadowTween","BoxShadowTween","duration","easing","done","applyStyles","currentValue","map","shadow","toString","join","rAF"],"mappings":";;;;AAKe,SAASA,SAASA,CAC/BC,MAAc,EACdC,IAAqC,GAAG,EAAE,EAC1C;EACA,OAAO,IAAIC,eAAe,CAACF,MAAM,EAAEC,IAAI,CAAC,CAACE,GAAG,EAAE,CAAA;AAChD,CAAA;AAQO,MAAMD,eAAe,SAASE,MAAM,CAAyB;EAClE,CAACC,OAAOA,GAAG;AACT,IAAA,IAAIC,IAAI,CAAA;AACR,IAAA,IAAI,IAAI,CAACL,IAAI,CAACK,IAAI,EAAE;MAClBA,IAAI,GAAGC,SAAS,CAACC,sBAAsB,CAAC,IAAI,CAACP,IAAI,CAACK,IAAI,CAAC,CAAA;AACzD,KAAC,MAAM;AACL,MAAA,IAAI,CAACN,MAAM,CAACS,sBAAsB,EAAE,CAAA;AACpCH,MAAAA,IAAI,GAAGC,SAAS,CAACG,iBAAiB,CAChC,IAAI,CAACV,MAAM,CAACW,oBAAoB,CAAC,YAAY,CAC/C,CAAC,CAAA;AACH,KAAA;AAEA,IAAA,IAAIC,EAAE,CAAA;AACN,IAAA,IAAI,IAAI,CAACX,IAAI,CAACW,EAAE,EAAE;MAChBA,EAAE,GAAGL,SAAS,CAACC,sBAAsB,CAAC,IAAI,CAACP,IAAI,CAACW,EAAE,CAAC,CAAA;AACrD,KAAC,MAAM;AACL,MAAA,IAAI,CAACZ,MAAM,CAACa,oBAAoB,EAAE,CAAA;AAClCD,MAAAA,EAAE,GAAGL,SAAS,CAACG,iBAAiB,CAC9B,IAAI,CAACV,MAAM,CAACc,kBAAkB,CAAC,YAAY,CAC7C,CAAC,CAAA;AACH,KAAA;AAEA,IAAA,IAAIC,WAAW,GAAG,IAAIC,cAAc,CAClCV,IAAI,EACJM,EAAE,EACF,IAAI,CAACK,QAAQ,EACb,IAAI,CAAChB,IAAI,CAACiB,MACZ,CAAC,CAAA;AACD,IAAA,OAAO,CAACH,WAAW,CAACI,IAAI,EAAE;AACxB,MAAA,IAAI,CAACnB,MAAM,CAACoB,WAAW,CAAC;AACtB,QAAA,YAAY,EAAEL,WAAW,CAACM,YAAY,CACnCC,GAAG,CAAEC,MAAM,IAAKA,MAAM,CAACC,QAAQ,EAAE,CAAC,CAClCC,IAAI,CAAC,GAAG,CAAA;AACb,OAAC,CAAC,CAAA;MACF,MAAMC,GAAG,EAAE,CAAA;AACb,KAAA;AACF,GAAA;AACF;;;;"}