{"version":3,"file":"singleton.js","sources":["../../src/-private/singleton.ts"],"sourcesContent":["declare global {\n  // eslint-disable-next-line no-var\n  var emberAnimatedSingleton: {\n    [key: symbol]: unknown;\n  };\n}\n\nwindow.emberAnimatedSingleton = window.emberAnimatedSingleton || {};\n\n// As this is v2 addon, imported via webpack and extensively used in tests,\n// this module may end up being used by app and tests entry points.\n// In such scenario, module(s) would be evaluated twice hence we need\n// a state that can be persisted via context across ES module invocations.\n// For some background info see https://github.com/webpack/webpack/issues/7556\n//\n// We should remove this file and getOrCreate usage once ember-auto-import gets fixed,\n// so we would have single entry point for app and tests.\n// Link to track status: https://github.com/ef4/ember-auto-import/issues/503\nexport function getOrCreate<T>(key: string, construct: () => T): T {\n  const symbol = Symbol.for(key);\n\n  // check if the global object has this symbol\n  // add it if it does not have the symbol, yet\n  // ------------------------------------------\n\n  let globalSymbols = Object.getOwnPropertySymbols(\n    window.emberAnimatedSingleton,\n  );\n  let hasFoo = globalSymbols.indexOf(symbol) > -1;\n\n  if (!hasFoo) {\n    window.emberAnimatedSingleton[symbol] = construct();\n  }\n\n  return window.emberAnimatedSingleton[symbol] as T;\n}\n"],"names":["window","emberAnimatedSingleton","getOrCreate","key","construct","symbol","Symbol","for","globalSymbols","Object","getOwnPropertySymbols","hasFoo","indexOf"],"mappings":"AAOAA,MAAM,CAACC,sBAAsB,GAAGD,MAAM,CAACC,sBAAsB,IAAI,EAAE,CAAA;;AAEnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,WAAWA,CAAIC,GAAW,EAAEC,SAAkB,EAAK;AACjE,EAAA,MAAMC,MAAM,GAAGC,MAAM,CAACC,GAAG,CAACJ,GAAG,CAAC,CAAA;;AAE9B;AACA;AACA;;EAEA,IAAIK,aAAa,GAAGC,MAAM,CAACC,qBAAqB,CAC9CV,MAAM,CAACC,sBACT,CAAC,CAAA;EACD,IAAIU,MAAM,GAAGH,aAAa,CAACI,OAAO,CAACP,MAAM,CAAC,GAAG,CAAC,CAAC,CAAA;EAE/C,IAAI,CAACM,MAAM,EAAE;IACXX,MAAM,CAACC,sBAAsB,CAACI,MAAM,CAAC,GAAGD,SAAS,EAAE,CAAA;AACrD,GAAA;AAEA,EAAA,OAAOJ,MAAM,CAACC,sBAAsB,CAACI,MAAM,CAAC,CAAA;AAC9C;;;;"}