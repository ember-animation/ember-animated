{"version":3,"file":"motion-tester.js","sources":["../../src/test-support/motion-tester.js"],"sourcesContent":["/* eslint-disable ember/no-classic-classes */\nimport { alias } from '@ember/object/computed';\nimport EmberObject from '@ember/object';\nimport { task } from '../-private/ember-scheduler.ts';\nimport Motion from '../-private/motion.ts';\nimport Sprite from '../-private/sprite.ts';\nimport TransitionContext from '../-private/transition-context.ts';\n\nexport default EmberObject.extend({\n  motion: null,\n  duration: 1,\n  beforeAnimation() {},\n  afterAnimation() {},\n  run(...args) {\n    let motion;\n    if (args[0] instanceof Motion) {\n      motion = args[0];\n    } else if (args[0] instanceof Sprite) {\n      let M = this.motion;\n      if (!M) {\n        throw new Error(\n          \"passing a Sprite to MotionTester#run only works if you've already set a default motion\",\n        );\n      }\n      motion = new M(args[0]);\n    } else {\n      throw new Error(\n        'first argument to MotionTester#run must be either a Motion or a Sprite',\n      );\n    }\n\n    let duration = this.duration;\n    if (args.length > 1 && args[1].duration != null) {\n      duration = args[1].duration;\n    }\n\n    let context = new TransitionContext(\n      duration,\n      [motion.sprite],\n      [],\n      [],\n      [],\n      [],\n      {},\n      () => null,\n      () => null,\n    );\n    context.insertedSprites;\n    return this.get('runner').perform(motion);\n  },\n  isAnimating: alias('runner.isRunning'),\n  runner: task(function* (motion) {\n    this.beforeAnimation(motion);\n    yield* motion._run();\n    this.afterAnimation(motion);\n  }).restartable(),\n});\n"],"names":["EmberObject","extend","motion","duration","beforeAnimation","afterAnimation","run","args","Motion","Sprite","M","Error","length","context","TransitionContext","sprite","insertedSprites","get","perform","isAnimating","alias","runner","task","_run","restartable"],"mappings":";;;;;;;AAAA;AAQA,mBAAeA,WAAW,CAACC,MAAM,CAAC;AAChCC,EAAAA,MAAM,EAAE,IAAI;AACZC,EAAAA,QAAQ,EAAE,CAAC;EACXC,eAAeA,GAAG,EAAE;EACpBC,cAAcA,GAAG,EAAE;EACnBC,GAAGA,CAAC,GAAGC,IAAI,EAAE;AACX,IAAA,IAAIL,MAAM;AACV,IAAA,IAAIK,IAAI,CAAC,CAAC,CAAC,YAAYC,MAAM,EAAE;AAC7BN,MAAAA,MAAM,GAAGK,IAAI,CAAC,CAAC,CAAC;KACjB,MAAM,IAAIA,IAAI,CAAC,CAAC,CAAC,YAAYE,MAAM,EAAE;AACpC,MAAA,IAAIC,CAAC,GAAG,IAAI,CAACR,MAAM;MACnB,IAAI,CAACQ,CAAC,EAAE;AACN,QAAA,MAAM,IAAIC,KAAK,CACb,wFACF,CAAC;AACH;MACAT,MAAM,GAAG,IAAIQ,CAAC,CAACH,IAAI,CAAC,CAAC,CAAC,CAAC;AACzB,KAAC,MAAM;AACL,MAAA,MAAM,IAAII,KAAK,CACb,wEACF,CAAC;AACH;AAEA,IAAA,IAAIR,QAAQ,GAAG,IAAI,CAACA,QAAQ;AAC5B,IAAA,IAAII,IAAI,CAACK,MAAM,GAAG,CAAC,IAAIL,IAAI,CAAC,CAAC,CAAC,CAACJ,QAAQ,IAAI,IAAI,EAAE;AAC/CA,MAAAA,QAAQ,GAAGI,IAAI,CAAC,CAAC,CAAC,CAACJ,QAAQ;AAC7B;AAEA,IAAA,IAAIU,OAAO,GAAG,IAAIC,iBAAiB,CACjCX,QAAQ,EACR,CAACD,MAAM,CAACa,MAAM,CAAC,EACf,EAAE,EACF,EAAE,EACF,EAAE,EACF,EAAE,EACF,EAAE,EACF,MAAM,IAAI,EACV,MAAM,IACR,CAAC;AACDF,IAAAA,OAAO,CAACG,eAAe;IACvB,OAAO,IAAI,CAACC,GAAG,CAAC,QAAQ,CAAC,CAACC,OAAO,CAAChB,MAAM,CAAC;GAC1C;AACDiB,EAAAA,WAAW,EAAEC,KAAK,CAAC,kBAAkB,CAAC;AACtCC,EAAAA,MAAM,EAAEC,IAAI,CAAC,WAAWpB,MAAM,EAAE;AAC9B,IAAA,IAAI,CAACE,eAAe,CAACF,MAAM,CAAC;AAC5B,IAAA,OAAOA,MAAM,CAACqB,IAAI,EAAE;AACpB,IAAA,IAAI,CAAClB,cAAc,CAACH,MAAM,CAAC;GAC5B,CAAC,CAACsB,WAAW;AAChB,CAAC,CAAC;;;;"}